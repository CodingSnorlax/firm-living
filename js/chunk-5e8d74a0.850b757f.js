(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e8d74a0"],{a643:function(t,e,a){"use strict";a.r(e);var c=a("7a23"),l={class:"container"},d={class:"table mt-4"},r=Object(c["g"])("thead",null,[Object(c["g"])("tr",null,[Object(c["g"])("th",null,"購買時間"),Object(c["g"])("th",null,"Email"),Object(c["g"])("th",null,"購買款項"),Object(c["g"])("th",null,"應付金額"),Object(c["g"])("th",null,"是否付款"),Object(c["g"])("th",null,"編輯")])],-1),n={key:0},o={class:"px-0 list-unstyled"},b={class:"text-right"},O={class:"form-check form-switch"},s=["onUpdate:modelValue","onChange"],i={class:"form-check-label"},u={key:0},j={key:1},g={class:"btn-group"},p=["onClick"],h=["onClick"];function m(t,e,a,m,f,y){var v=Object(c["G"])("order-modal"),k=Object(c["G"])("delete-order-modal"),M=Object(c["G"])("dashboard-pagination");return Object(c["y"])(),Object(c["f"])("div",l,[Object(c["g"])("table",d,[r,Object(c["g"])("tbody",null,[(Object(c["y"])(!0),Object(c["f"])(c["a"],null,Object(c["F"])(f.orders,(function(e){return Object(c["y"])(),Object(c["f"])(c["a"],{key:e.id},[f.orders.length?(Object(c["y"])(),Object(c["f"])("tr",n,[Object(c["g"])("td",null,Object(c["J"])(t.$filters.date(e.create_at)),1),Object(c["g"])("td",null,[Object(c["g"])("span",null,Object(c["J"])(e.user.email),1)]),Object(c["g"])("td",null,[Object(c["g"])("ul",o,[(Object(c["y"])(!0),Object(c["f"])(c["a"],null,Object(c["F"])(e.products,(function(t,e){return Object(c["y"])(),Object(c["f"])("li",{key:e},Object(c["J"])(t.product.title)+" / 數量："+Object(c["J"])(t.qty)+" "+Object(c["J"])(t.product.unit),1)})),128))])]),Object(c["g"])("td",b,Object(c["J"])(e.total),1),Object(c["g"])("td",null,[Object(c["g"])("div",O,[Object(c["T"])(Object(c["g"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":function(t){return e.is_paid=t},onChange:function(t){return y.switchPaidStatus(e)}},null,40,s),[[c["M"],e.is_paid]]),Object(c["g"])("label",i,[!0===e.is_paid?(Object(c["y"])(),Object(c["f"])("span",u,"已付款")):(Object(c["y"])(),Object(c["f"])("span",j,"未付款"))])])]),Object(c["g"])("td",null,[Object(c["g"])("div",g,[Object(c["g"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:function(t){return y.openOrderModal("checkOrder",e)}}," 檢視 ",8,p),Object(c["g"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(t){return y.openOrderModal("deleteOrder",e)}}," 刪除 ",8,h)])])])):Object(c["e"])("",!0)],64)})),128))])]),Object(c["j"])(v,{ref:"orderModal",order:f.tempOrderData,orderModal:f.OrderModal,onGetOrderData:y.getOrderData},null,8,["order","orderModal","onGetOrderData"]),Object(c["j"])(k,{itemData:f.tempOrderData,deleteOrderModal:f.DeleteOrderModal,onGetOrderData:y.getOrderData},null,8,["itemData","deleteOrderModal","onGetOrderData"]),Object(c["j"])(M,{pages:f.pagination,onGetProduct:y.getOrderData},null,8,["pages","onGetProduct"])])}var f=a("5530"),y=(a("99af"),a("7c2b")),v=a.n(y),k=a("0dba"),M=(a("b0c0"),{class:"modal fade",id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),D={class:"modal-dialog modal-xl",role:"document"},x={class:"modal-content border-0"},J=Object(c["g"])("div",{class:"modal-header bg-dark text-white"},[Object(c["g"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["g"])("span",null,"訂單細節")]),Object(c["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),w={class:"modal-body"},P={class:"row"},C={class:"col-md-4"},$=Object(c["g"])("h3",null,"用戶資料",-1),_={class:"table"},G={key:0},S=Object(c["g"])("th",{style:{width:"100px"}},"姓名",-1),E=Object(c["g"])("th",null,"Email",-1),F=Object(c["g"])("th",null,"電話",-1),L=Object(c["g"])("th",null,"地址",-1),I={class:"col-md-8"},T=Object(c["g"])("h3",null,"訂單細節",-1),U={class:"table"},V=Object(c["g"])("th",{style:{width:"100px"}},"訂單編號",-1),q=Object(c["g"])("th",null,"下單時間",-1),B=Object(c["g"])("th",null,"付款時間",-1),N={key:0},X={key:1},z=Object(c["g"])("th",null,"付款狀態",-1),A={key:0,class:"text-success"},H={key:1,class:"text-muted"},K=Object(c["g"])("th",null,"總金額",-1),Q=Object(c["g"])("h3",null,"選購商品",-1),R={class:"table"},W=Object(c["g"])("thead",null,[Object(c["g"])("tr")],-1),Y={class:"text-end"},Z={class:"d-flex justify-content-end"},tt={class:"form-check"},et={class:"form-check-label",for:"flexCheckDefault"},at={key:0},ct={key:1},lt={class:"modal-footer"},dt=Object(c["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function rt(t,e,a,l,d,r){return Object(c["y"])(),Object(c["f"])("div",M,[Object(c["g"])("div",D,[Object(c["g"])("div",x,[J,Object(c["g"])("div",w,[Object(c["g"])("div",P,[Object(c["g"])("div",C,[$,Object(c["g"])("table",_,[d.tempOrderObj.user?(Object(c["y"])(),Object(c["f"])("tbody",G,[Object(c["g"])("tr",null,[S,Object(c["g"])("td",null,Object(c["J"])(d.tempOrderObj.user.name),1)]),Object(c["g"])("tr",null,[E,Object(c["g"])("td",null,Object(c["J"])(d.tempOrderObj.user.email),1)]),Object(c["g"])("tr",null,[F,Object(c["g"])("td",null,Object(c["J"])(d.tempOrderObj.user.tel),1)]),Object(c["g"])("tr",null,[L,Object(c["g"])("td",null,Object(c["J"])(d.tempOrderObj.user.address),1)])])):Object(c["e"])("",!0)])]),Object(c["g"])("div",I,[T,Object(c["g"])("table",U,[Object(c["g"])("tbody",null,[Object(c["g"])("tr",null,[V,Object(c["g"])("td",null,Object(c["J"])(d.tempOrderObj.id),1)]),Object(c["g"])("tr",null,[q,Object(c["g"])("td",null,Object(c["J"])(t.$filters.date(d.tempOrderObj.create_at)),1)]),Object(c["g"])("tr",null,[B,Object(c["g"])("td",null,[d.tempOrderObj.paid_date?(Object(c["y"])(),Object(c["f"])("span",N,Object(c["J"])(t.$filters.date(d.tempOrderObj.paid_date)),1)):(Object(c["y"])(),Object(c["f"])("span",X,"時間不正確"))])]),Object(c["g"])("tr",null,[z,Object(c["g"])("td",null,[d.tempOrderObj.is_paid?(Object(c["y"])(),Object(c["f"])("strong",A,"已付款")):(Object(c["y"])(),Object(c["f"])("span",H,"尚未付款"))])]),Object(c["g"])("tr",null,[K,Object(c["g"])("td",null,Object(c["J"])(t.$filters.currency(d.tempOrderObj.total)),1)])])]),Q,Object(c["g"])("table",R,[W,Object(c["g"])("tbody",null,[(Object(c["y"])(!0),Object(c["f"])(c["a"],null,Object(c["F"])(d.tempOrderObj.products,(function(e){return Object(c["y"])(),Object(c["f"])("tr",{key:e.id},[Object(c["g"])("th",null,Object(c["J"])(e.product.title),1),Object(c["g"])("td",null,Object(c["J"])(e.qty)+" / "+Object(c["J"])(e.product.unit),1),Object(c["g"])("td",Y,Object(c["J"])(t.$filters.currency(e.final_total)),1)])})),128))])]),Object(c["g"])("div",Z,[Object(c["g"])("div",tt,[Object(c["T"])(Object(c["g"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[0]||(e[0]=function(t){return d.tempOrderObj.is_paid=t})},null,512),[[c["M"],d.tempOrderObj.is_paid]]),Object(c["g"])("label",et,[d.tempOrderObj.is_paid?(Object(c["y"])(),Object(c["f"])("span",at,"已付款")):(Object(c["y"])(),Object(c["f"])("span",ct,"未付款"))])])])])])]),Object(c["g"])("div",lt,[dt,Object(c["g"])("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=function(){return r.updatePaidData&&r.updatePaidData.apply(r,arguments)})}," 修改付款狀態 ")])])])],512)}a("e9c4");var nt={methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new v.a(this.$refs.modal)}},ot={props:["order","orderModal"],mixins:[nt],data:function(){return{status:{},tempOrderObj:{}}},watch:{order:function(){this.tempOrderObj=JSON.parse(JSON.stringify(this.order))}},methods:{updatePaidData:function(){var t=this;this.$http.put("".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("karen666","/admin/order/").concat(this.tempOrderObj.id),{data:this.tempOrderObj}).then((function(e){console.log(e),t.orderModal.hide(),t.$emit("get-order-data")})).catch((function(t){console.log(t.data)}))}}},bt=a("6b0d"),Ot=a.n(bt);const st=Ot()(ot,[["render",rt]]);var it=st,ut={id:"deleteOrderModal",ref:"deleteModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},jt={class:"modal-dialog"},gt={class:"modal-content border-0"},pt=Object(c["g"])("div",{class:"modal-header bg-danger text-white"},[Object(c["g"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(c["g"])("span",null,"刪除訂單")]),Object(c["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ht={class:"modal-body"},mt=Object(c["i"])(" 是否刪除編號 "),ft={class:"text-danger"},yt=Object(c["i"])(" 訂單 (刪除後無法恢復) "),vt={class:"modal-footer"},kt=Object(c["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Mt(t,e,a,l,d,r){return Object(c["y"])(),Object(c["f"])("div",ut,[Object(c["g"])("div",jt,[Object(c["g"])("div",gt,[pt,Object(c["g"])("div",ht,[mt,Object(c["g"])("strong",ft,Object(c["J"])(d.tempProductObj.id),1),yt]),Object(c["g"])("div",vt,[kt,Object(c["g"])("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=function(){return r.deleteOrder&&r.deleteOrder.apply(r,arguments)})}," 確認刪除 ")])])])],512)}var Dt={props:["itemData","deleteOrderModal"],data:function(){return{tempProductObj:{}}},watch:{itemData:function(){this.tempProductObj=this.itemData}},methods:{deleteOrder:function(){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("karen666","/admin/order/").concat(this.tempProductObj.id)).then((function(e){alert("訂單已刪除！"),t.deleteOrderModal.hide(),t.$emit("get-order-data")})).catch((function(t){console.dir(t)}))}}};const xt=Ot()(Dt,[["render",Mt]]);var Jt=xt,wt={data:function(){return{orders:{},tempOrderData:{},pagination:{},OrderModal:{},DeleteOrderModal:{},isPaid:!0}},components:{DashboardPagination:k["a"],OrderModal:it,DeleteOrderModal:Jt},methods:{switchPaidStatus:function(){this.$refs.orderModal.updatePaidData()},getOrderData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("karen666","/admin/orders/?page=").concat(e)).then((function(e){t.orders=e.data.orders,t.pagination=e.data.pagination})).catch((function(t){console.log(t.data)}))},openOrderModal:function(t,e){"checkOrder"===t?(this.tempOrderData=Object(f["a"])({},e),this.OrderModal.show()):"deleteOrder"===t&&(this.tempOrderData=Object(f["a"])({},e),this.DeleteOrderModal.show())}},mounted:function(){this.getOrderData(),this.OrderModal=new v.a(document.getElementById("orderModal")),this.DeleteOrderModal=new v.a(document.getElementById("deleteOrderModal"))}};const Pt=Ot()(wt,[["render",m]]);e["default"]=Pt},b0c0:function(t,e,a){var c=a("83ab"),l=a("5e77").EXISTS,d=a("e330"),r=a("9bf2").f,n=Function.prototype,o=d(n.toString),b=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,O=d(b.exec),s="name";c&&!l&&r(n,s,{configurable:!0,get:function(){try{return O(b,o(this))[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-5e8d74a0.850b757f.js.map